# VitaGlobal API 开发规范

## API 设计原则

基于 [API_DOC.md](mdc:API_DOC.md) 中定义的接口规范进行开发：

### 接口命名规范
- 使用 RESTful 风格：`GET /users`, `POST /users`, `PUT /users/{id}`
- 资源名使用复数形式
- 路径使用小写字母和连字符

### 数据格式要求
- 所有接口使用 JSON 格式
- 时间格式统一使用 ISO 8601 (YYYY-MM-DDTHH:mm:ssZ)
- UUID 使用标准格式

### 错误处理规范
参考 [API_DOC.md](mdc:API_DOC.md) 中的标准错误码：
- 400: INVALID_REQUEST - 请求参数错误
- 401: UNAUTHORIZED - 未认证或Token无效
- 403: FORBIDDEN - 权限不足
- 404: NOT_FOUND - 资源不存在

### 认证要求
- 所有需要认证的接口必须验证 JWT Token
- Token 格式：`Authorization: Bearer <JWT_TOKEN>`
- 实施速率限制防止恶意请求

## 数据库操作规范

遵循 [DB_SCHEMA.md](mdc:DB_SCHEMA.md) 中的数据库设计：

### 表结构要求
- 所有主键使用 UUID 类型
- 时间字段使用 TIMESTAMPTZ 类型
- 枚举类型优先使用 PostgreSQL ENUM

### 查询优化
- 使用文档中定义的索引
- 避免 N+1 查询问题
- 分页查询使用 LIMIT 和 OFFSET

### 数据完整性
- 外键约束必须正确设置
- 敏感数据加密存储
- 定期备份和恢复测试
