# 🧪 Web端姓名验证功能 - 生产环境测试指南

## 📋 测试环境信息
- **Web端地址**: http://localhost:8090  
- **后端API**: https://www.vitaglobal.icu (生产环境)
- **配置**: 使用 .env.production 配置

## ✅ 已完成的功能实现

### 1. 核心验证工具
- ✅ **独立验证工具**: `frontend-web/src/utils/textValidation.ts`
- ✅ **中文字符检测**: 基于Unicode范围 `[\u4e00-\u9fff]`
- ✅ **英文字母检测**: 只允许 `[a-zA-Z]`
- ✅ **拼音转换**: 百家姓和常用汉字映射
- ✅ **智能语言检测**: 基于 `i18n.language`

### 2. 验证规则
- ✅ **中文环境**: 姓氏/名字只能输入中文
- ✅ **英文环境**: 姓氏/名字可输入中英文  
- ✅ **常用名**: 任何环境都只能输入英文字母
- ✅ **实时验证**: 输入时立即显示错误
- ✅ **按钮控制**: 验证失败时禁用提交

### 3. 国际化支持
- ✅ **中文错误信息**: "请填写中文", "常用名只能输入字母（不允许标点符号和空格数字）"
- ✅ **英文错误信息**: "Please enter Chinese characters", "Common name can only contain letters"

## 🔍 生产环境测试步骤

### 第1步: 访问注册页面
```
1. 打开浏览器访问: http://localhost:8090
2. 找到学生注册或家长注册入口
3. 确认页面连接到生产API
```

### 第2步: 中文环境测试
```
1. 确认浏览器语言设置为中文 (zh-CN)
2. 在"姓"字段输入:
   - ✅ 输入"张" → 应该正常，无错误
   - ❌ 输入"Smith" → 应显示"请填写中文"
3. 在"名"字段输入:
   - ✅ 输入"伟" → 应该正常，无错误  
   - ❌ 输入"John" → 应显示"请填写中文"
4. 在"常用名"字段输入:
   - ✅ 输入"David" → 应该正常，无错误
   - ❌ 输入"David123" → 应显示错误信息
   - ❌ 输入"David.Smith" → 应显示错误信息
   - ❌ 输入"David Smith" → 应显示错误信息
```

### 第3步: 英文环境测试
```
1. 切换浏览器语言为英文 (en-US) 或在应用内切换语言
2. 在姓名字段输入:
   - ✅ 输入中文"张伟" → 应该允许
   - ✅ 输入英文"John Smith" → 应该允许
3. 常用名字段仍然只能输入英文字母
```

### 第4步: 实时验证测试
```
1. 边输入边观察错误信息的显示和消失
2. 验证失败时"下一步"或"注册"按钮应变灰禁用
3. 所有验证通过时按钮应重新启用
```

### 第5步: 后端数据格式验证
```
学生注册完成后检查生成的数据:
- legalName: "张 伟"
- nickName: "David zhang" (常用名 + 空格 + 姓氏拼音)

家长注册完成后检查:
- legalName: "李 华"  
- nickName: "华" (使用名字作为昵称)
```

## 🎯 预期测试结果

### 应该通过的测试
- [x] 中文环境 + 中文姓名 + 英文常用名
- [x] 英文环境 + 中文姓名 + 英文常用名  
- [x] 英文环境 + 英文姓名 + 英文常用名
- [x] 家长注册（无常用名字段）

### 应该失败的测试
- [x] 中文环境 + 英文姓名
- [x] 常用名包含数字/标点/空格
- [x] 空字段提交

## 📱 测试完成标准

- ✅ 所有验证规则按预期工作
- ✅ 错误信息正确显示中英文版本
- ✅ 实时验证响应迅速
- ✅ 按钮状态正确控制
- ✅ 后端数据格式符合要求
- ✅ 中文输入法正常工作
- ✅ 与生产API成功交互

## 🛠️ 故障排除

如果遇到问题，检查:
1. 浏览器开发者工具 → Console 查看JavaScript错误
2. Network选项卡查看API请求状态
3. 确认生产环境配置正确加载
4. 验证国际化语言设置

---
**生产环境测试现已就绪！** 🚀