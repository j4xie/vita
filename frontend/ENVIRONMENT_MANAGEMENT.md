# ğŸŒŸ PomeloX ç¯å¢ƒç®¡ç†å®Œæ•´æ–¹æ¡ˆ

## ğŸ“‹ æ¦‚è¿°

PomeloXç°åœ¨æ‹¥æœ‰å®Œæ•´çš„ç¯å¢ƒç®¡ç†æ–¹æ¡ˆï¼Œç»“åˆäº†ä½ åŸæœ‰çš„çµæ´»å¼€å‘ç¯å¢ƒåˆ‡æ¢å’Œæ–°çš„è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹ï¼Œå®ç°äº†ä»å¼€å‘åˆ°å‘å¸ƒçš„å®Œæ•´è‡ªåŠ¨åŒ–ã€‚

## ğŸ”„ åŒé‡ç¯å¢ƒç®¡ç†ç­–ç•¥

### **1. å¼€å‘é˜¶æ®µ - çµæ´»åˆ‡æ¢** (ä¿ç•™ä½ çš„æ–¹æ¡ˆ)

é€‚ç”¨äºæœ¬åœ°å¼€å‘å’Œè°ƒè¯•ï¼š

```bash
# åˆ‡æ¢åˆ°å¼€å‘ç¯å¢ƒ
npm run env:dev && npm run ios

# åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ
npm run env:prod && npm run ios

# æŸ¥çœ‹å½“å‰ç¯å¢ƒçŠ¶æ€
npm run env:status
```

### **2. å‘å¸ƒé˜¶æ®µ - è‡ªåŠ¨åŒ–å‘å¸ƒ** (æ–°å¢EAS Profiles)

é€‚ç”¨äºTestFlightå’ŒApp Storeå‘å¸ƒï¼š

```bash
# TestFlightå‘å¸ƒ (è‡ªåŠ¨ä½¿ç”¨å¼€å‘ç¯å¢ƒ)
npm run testflight:release

# App Storeå‘å¸ƒ (è‡ªåŠ¨ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒ)
npm run appstore:release
```

## ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

| ç‰¹æ€§ | å¼€å‘é˜¶æ®µ | å‘å¸ƒé˜¶æ®µ |
|------|----------|----------|
| **çµæ´»æ€§** | âœ… ä¸€é”®åˆ‡æ¢ç¯å¢ƒ | âœ… è‡ªåŠ¨é€‰æ‹©ç¯å¢ƒ |
| **å®‰å…¨æ€§** | âœ… æœ¬åœ°å¯æ§ | âœ… é›¶åˆ‡æ¢é”™è¯¯ |
| **æ•ˆç‡** | âœ… å¿«é€Ÿè°ƒè¯• | âœ… ä¸€é”®å‘å¸ƒ |
| **è¿½è¸ª** | âœ… çŠ¶æ€å¯æŸ¥ | âœ… ç¯å¢ƒéš”ç¦» |

## ğŸš€ å®Œæ•´å‘å¸ƒå·¥ä½œæµç¨‹

### **æ­¥éª¤1: ç‰ˆæœ¬ç®¡ç†**

```bash
# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
npm run version:status

# åˆ›å»ºBetaç‰ˆæœ¬ (TestFlightç”¨)
npm run version:beta    # 1.0.31 -> 1.0.32-beta.1

# å‡çº§æ­£å¼ç‰ˆæœ¬ (App Storeç”¨)
npm run version:release # 1.0.32-beta.1 -> 1.0.32
```

### **æ­¥éª¤2: TestFlightå‘å¸ƒ** (å¼€å‘ç¯å¢ƒæ•°æ®)

```bash
# ä¸€é”®å‘å¸ƒåˆ°TestFlight
npm run testflight:release
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… æ£€æŸ¥ä»£ç è´¨é‡ (TypeScript + ESLint)
- âœ… ä½¿ç”¨staging profile (å¼€å‘ç¯å¢ƒAPI)
- âœ… æ„å»ºiOSåº”ç”¨
- âœ… ä¸Šä¼ åˆ°TestFlight
- âœ… å‘é€å®Œæˆé€šçŸ¥

### **æ­¥éª¤3: App Storeå‘å¸ƒ** (ç”Ÿäº§ç¯å¢ƒæ•°æ®)

```bash
# ä¸€é”®å‘å¸ƒåˆ°App Store
npm run appstore:release
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… è¿è¡Œå®‰å…¨æ£€æŸ¥ (ç”Ÿäº§ç¯å¢ƒé…ç½®éªŒè¯)
- âœ… ä½¿ç”¨production profile (ç”Ÿäº§ç¯å¢ƒAPI)
- âœ… æ„å»ºç”Ÿäº§ç‰ˆæœ¬
- âœ… æäº¤App Storeå®¡æ ¸
- âœ… æä¾›åç»­æ­¥éª¤æŒ‡å¼•

## ğŸ”§ æŠ€æœ¯å®ç°è¯¦æƒ…

### **EAS Profilesé…ç½®**

```json
{
  "build": {
    "staging": {
      "env": {
        "EXPO_PUBLIC_ENVIRONMENT": "development",
        "EXPO_PUBLIC_API_URL": "http://106.14.165.234:8085"
      }
    },
    "production": {
      "env": {
        "EXPO_PUBLIC_ENVIRONMENT": "production",
        "EXPO_PUBLIC_API_URL": "https://www.vitaglobal.icu"
      }
    }
  }
}
```

### **ç‰ˆæœ¬å·ç®¡ç†**

- **Betaç‰ˆæœ¬**: `1.0.31-beta.1` (TestFlight)
- **æ­£å¼ç‰ˆæœ¬**: `1.0.31` (App Store)
- **è‡ªåŠ¨åŒæ­¥**: package.jsonã€app.jsonã€Info.plist

### **å®‰å…¨æ£€æŸ¥**

1. **å‘å¸ƒå‰éªŒè¯**:
   - TypeScriptç±»å‹æ£€æŸ¥
   - ESLintä»£ç è§„èŒƒ
   - ç¯å¢ƒé…ç½®æ£€æŸ¥

2. **ç”Ÿäº§ç¯å¢ƒä¿æŠ¤**:
   - ç¦æ­¢æµ‹è¯•APIåœ°å€
   - å…³é—­è°ƒè¯•æ¨¡å¼
   - äºŒæ¬¡ç¡®è®¤æœºåˆ¶

## ğŸ“± ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

### **åœºæ™¯1: å¼€å‘æ–°åŠŸèƒ½**

```bash
# 1. åˆ‡æ¢åˆ°å¼€å‘ç¯å¢ƒæµ‹è¯•
npm run env:dev && npm run ios

# 2. åŠŸèƒ½å®Œæˆååˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒéªŒè¯
npm run env:prod && npm run ios
```

### **åœºæ™¯2: TestFlightå†…æµ‹**

```bash
# 1. åˆ›å»ºBetaç‰ˆæœ¬
npm run version:beta

# 2. å‘å¸ƒåˆ°TestFlight
npm run testflight:release

# 3. ç­‰å¾…é‚®ä»¶é€šçŸ¥ï¼Œåœ¨TestFlightä¸­æµ‹è¯•
```

### **åœºæ™¯3: App Storeæ­£å¼å‘å¸ƒ**

```bash
# 1. ä»Betaå‡çº§ä¸ºæ­£å¼ç‰ˆæœ¬
npm run version:release

# 2. å‘å¸ƒåˆ°App Store
npm run appstore:release

# 3. å…³æ³¨å®¡æ ¸çŠ¶æ€
```

## âš ï¸ é‡è¦æé†’

### **å‘å¸ƒæ—¶æœº**
- **TestFlight**: éšæ—¶å¯å‘å¸ƒï¼Œç”¨äºå†…æµ‹
- **App Store**: ç¡®ä¿TestFlightå……åˆ†æµ‹è¯•åå†å‘å¸ƒ

### **ç¯å¢ƒæ•°æ®**
- **TestFlight**: ä½¿ç”¨å¼€å‘ç¯å¢ƒæ•°æ® (æµ‹è¯•æ´»åŠ¨ã€æµ‹è¯•ç”¨æˆ·)
- **App Store**: ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒæ•°æ® (çœŸå®æ´»åŠ¨ã€çœŸå®ç”¨æˆ·)

### **ç‰ˆæœ¬ç­–ç•¥**
- **æ¯æ¬¡å‘å¸ƒTestFlight**: ä½¿ç”¨`npm run version:beta`
- **æ­£å¼å‘å¸ƒApp Store**: ä½¿ç”¨`npm run version:release`

## ğŸ‰ æ€»ç»“

ç°åœ¨ä½ æ‹¥æœ‰äº†ä¸šç•Œæœ€ä½³çš„ç¯å¢ƒç®¡ç†æ–¹æ¡ˆï¼š

1. **å¼€å‘æ—¶**: ä½¿ç”¨ä½ åŸæœ‰çš„`npm run env:dev/prod`çµæ´»åˆ‡æ¢
2. **å‘å¸ƒæ—¶**: ä½¿ç”¨æ–°çš„`npm run testflight:release/appstore:release`è‡ªåŠ¨åŒ–å‘å¸ƒ
3. **ç‰ˆæœ¬ç®¡ç†**: ä½¿ç”¨`npm run version:*`æ™ºèƒ½ç‰ˆæœ¬ç®¡ç†
4. **é›¶é”™è¯¯é£é™©**: å‘å¸ƒæ—¶è‡ªåŠ¨é€‰æ‹©æ­£ç¡®ç¯å¢ƒï¼Œæ— éœ€æ‰‹åŠ¨åˆ‡æ¢

è¿™æ ·æ—¢ä¿æŒäº†å¼€å‘çš„çµæ´»æ€§ï¼Œåˆç¡®ä¿äº†å‘å¸ƒçš„å‡†ç¡®æ€§å’Œå®‰å…¨æ€§ï¼ğŸš€