# 完整手动测试操作指南

## 🚀 启动准备

### 1. 启动应用
```bash
# 在 frontend 目录下
npm run ios
# 或者
npx expo run:ios
```

### 2. 登录测试账号
- **测试环境**: 使用测试账号登录
- **用户名**: 输入您的测试账号
- **密码**: 输入对应密码
- **权限要求**: 需要有志愿者管理权限（staff/part_manage/manage）

---

## 📋 志愿者功能测试步骤

### 测试路径 1：志愿者签到流程

#### 1.1 进入志愿者管理
```
操作步骤：
1. 登录成功后，在首页底部导航栏
2. 点击 "福祉" (Wellbeing) Tab
3. 在福祉页面找到 "志愿者管理" 卡片
4. 点击 "志愿者管理" 进入
```

#### 1.2 执行签到操作
```
操作步骤：
1. 在志愿者管理页面，查看顶部个人状态卡片
2. 如果显示 "未签到"，点击 "立即签到" 按钮
3. 系统自动记录当前时间作为签到时间
4. 签到成功后会显示成功提示
```

**验证点：**
- [ ] 签到时间显示格式正确（HH:mm）
- [ ] 时间是否为当前本地时间
- [ ] 签到状态是否变更为 "已签到"

### 测试路径 2：志愿者签退流程

#### 2.1 签退前置条件
```
前置条件：必须先完成签到
```

#### 2.2 执行签退操作
```
操作步骤：
1. 在已签到状态下，点击 "签退" 按钮
2. 进入签退页面，查看以下信息：
   - 签到时间（应显示之前的签到时间）
   - 当前时间（应显示当前本地时间）
   - 工作时长（自动计算）
3. 在工作描述框输入工作内容
4. 使用快捷选择按钮或手动输入：
   - 分部活动
   - 接机活动
   - 分部摆摊
   - 见面会
5. 点击 "确认签退" 按钮
```

**验证点：**
- [ ] 签到时间显示是否正确
- [ ] 当前时间是否实时更新
- [ ] 工作时长计算是否准确
- [ ] 工作描述是否必填
- [ ] 提交按钮在描述为空时是否禁用

### 测试路径 3：历史记录查看

#### 3.1 打开历史记录
```
操作步骤：
1. 在志愿者管理页面
2. 找到 "查看历史记录" 按钮
3. 点击打开历史记录底部弹窗
```

#### 3.2 筛选时间范围
```
操作步骤：
1. 在历史记录弹窗顶部
2. 选择时间范围：
   - 1天（查看今日记录）
   - 3天（近3天记录）
   - 7天（一周记录）
   - 30天（管理员权限才有）
3. 查看不同时间范围的记录
```

**验证点：**
- [ ] 时间格式显示（今日 HH:mm 或 MM/DD HH:mm）
- [ ] 工作时长显示格式（X小时X分钟）
- [ ] 超时警告标识（>12小时显示红色警告）
- [ ] 记录状态（待审核/已通过/已拒绝）

### 测试路径 4：学校志愿者管理（管理员功能）

#### 4.1 进入学校管理
```
操作步骤：
1. 在志愿者管理页面
2. 点击 "学校志愿者管理" Tab
3. 查看学校志愿者列表
```

#### 4.2 查看志愿者状态
```
操作步骤：
1. 在列表中查看每个志愿者的状态
2. 观察显示的信息：
   - 姓名
   - 签到状态（未签到/已签到/已签退）
   - 最后签到时间
   - 最后签退时间
```

#### 4.3 代理签到/签退（管理员功能）
```
操作步骤：
1. 点击某个志愿者卡片
2. 选择 "代理签到" 或 "代理签退"
3. 确认操作
```

---

## 🔍 边界情况测试

### 场景 1：超长工作时间
```
测试步骤：
1. 找一个签到时间超过12小时的记录
2. 尝试签退
3. 查看是否有超时警告
```

**预期结果：**
- 显示 "X小时X分钟 (超时)" 红色警告
- 历史记录中标记为异常

### 场景 2：跨日签退
```
测试步骤：
1. 晚上23:00后签到
2. 第二天凌晨签退
3. 查看时间显示和时长计算
```

**预期结果：**
- 日期正确显示
- 时长计算准确
- 不会出现负数时长

### 场景 3：无网络操作
```
测试步骤：
1. 开启飞行模式
2. 尝试签到/签退
3. 查看错误提示
```

**预期结果：**
- 显示网络错误提示
- 操作失败但不会崩溃

### 场景 4：快速重复操作
```
测试步骤：
1. 快速连续点击签到按钮
2. 快速切换页面
3. 同时打开多个弹窗
```

**预期结果：**
- 防重复提交机制生效
- 不会创建重复记录
- UI不会卡死

---

## 🎯 其他功能测试

### 活动模块时间测试

#### 进入活动详情
```
操作步骤：
1. 从首页进入 "活动" Tab
2. 选择任意活动查看详情
3. 查看活动时间显示
```

**验证点：**
- [ ] 活动日期格式（MM/DD-MM/DD）
- [ ] 活动时间格式（HH:mm AM/PM）
- [ ] 已结束活动的判断

### 快速操作测试

#### 扫码签到/签退
```
操作步骤：
1. 从首页点击扫码按钮
2. 扫描志愿者二维码
3. 在弹出的快速操作窗口执行签到/签退
```

**验证点：**
- [ ] 快速签到时间记录
- [ ] 快速签退时长计算
- [ ] 操作成功提示

---

## ⚠️ 异常情况处理

### 1. 时间显示异常
如果发现时间显示为 "--:--"：
- 检查网络连接
- 刷新页面
- 查看控制台错误

### 2. 时长计算错误
如果工作时长显示异常：
- 检查签到时间是否正确
- 确认设备时间设置正确
- 查看是否有时区问题

### 3. 无法签退
如果签退按钮不可用：
- 确认已经签到
- 检查是否有未完成的签退流程
- 刷新状态

---

## 📊 性能测试

### 列表滚动测试
```
操作步骤：
1. 在历史记录中加载30天数据
2. 快速上下滚动列表
3. 观察是否有卡顿
```

### 页面切换测试
```
操作步骤：
1. 快速切换不同Tab页
2. 频繁打开关闭弹窗
3. 观察响应速度
```

---

## ✅ 测试完成确认清单

### 基础功能
- [ ] 签到功能正常
- [ ] 签退功能正常
- [ ] 时长计算准确
- [ ] 历史记录显示正确
- [ ] 时间格式统一

### 边界情况
- [ ] 超时警告正常
- [ ] 跨日处理正确
- [ ] 异常时间标记
- [ ] 错误提示友好

### 性能表现
- [ ] 页面加载快速
- [ ] 列表滚动流畅
- [ ] 无内存泄漏
- [ ] 无崩溃情况

### 用户体验
- [ ] 操作流程顺畅
- [ ] 提示信息清晰
- [ ] 错误恢复正常
- [ ] 国际化正确

---

## 📝 问题记录模板

如果发现问题，请按以下格式记录：

```
问题编号：#001
问题描述：签到时间显示不正确
复现步骤：
1. 登录应用
2. 进入志愿者管理
3. 点击签到
预期结果：显示当前本地时间
实际结果：显示了错误的时间
严重程度：高/中/低
截图：[附件]
```

---

## 🔄 回归测试注意事项

在测试新功能的同时，请确认以下功能未受影响：

1. **用户登录流程**
   - 登录功能正常
   - Token保存正确
   - 自动登录有效

2. **活动报名流程**
   - 活动列表加载
   - 活动详情显示
   - 报名功能正常

3. **个人中心功能**
   - 个人信息显示
   - 设置功能正常
   - 退出登录有效

4. **国际化切换**
   - 中英文切换正常
   - 时间格式跟随语言
   - 文本显示完整

---

**测试提示：**
- 建议使用真机测试以获得最准确的结果
- 测试前确保设备时间设置正确
- 记录所有异常情况的截图
- 遇到问题时查看开发者控制台日志